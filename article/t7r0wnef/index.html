<!doctype html><html lang="zh-CN"><head><meta charset="utf-8" /><meta name="viewport" content="width=device-width,initial-scale=1" /><meta name="generator" content="VuePress 2.0.0-rc.24" /><meta name="theme" content="VuePress Theme Plume 1.0.0-rc.163" /><script id="check-mac-os">document.documentElement.classList.toggle('mac', /Mac|iPhone|iPod|iPad/i.test(navigator.platform))</script><script id="check-dark-mode">;(function () {const um= localStorage.getItem('vuepress-theme-appearance') || 'auto';const sm = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;const isDark = um === 'dark' || (um !== 'light' && sm);document.documentElement.dataset.theme = isDark ? 'dark' : 'light';})();</script><script type="application/ld+json">{"@context":"https://schema.org","@type":"Article","headline":"秋招面经笔记-操作系统&Linux串烧","image":[""],"dateModified":"2025-10-08T11:03:23.000Z","author":[]}</script><meta property="og:url" content="https://dessera.github.io/article/t7r0wnef/"><meta property="og:site_name" content="Dessera Lab"><meta property="og:title" content="秋招面经笔记-操作系统&Linux串烧"><meta property="og:description" content="进程、线程与协程 Linux线程：轻量级的进程，与进程同样以task_struct结构体的形式保存，线程栈的大小默认是8M，最大线程数一般受制于虚拟空间大小 线程回收： 等待线程结束（pthread_join） 直接结束线程（pthread_exit），分离 让线程自己管理自己的资源（pthread_detach） 进程的创建（fork）：内部调用ke..."><meta property="og:type" content="article"><meta property="og:locale" content="zh-CN"><meta property="og:updated_time" content="2025-10-08T11:03:23.000Z"><meta property="article:tag" content="Linux"><meta property="article:tag" content="OS"><meta property="article:modified_time" content="2025-10-08T11:03:23.000Z"><title>秋招面经笔记-操作系统&Linux串烧 | Dessera Lab</title><meta name="description" content="进程、线程与协程 Linux线程：轻量级的进程，与进程同样以task_struct结构体的形式保存，线程栈的大小默认是8M，最大线程数一般受制于虚拟空间大小 线程回收： 等待线程结束（pthread_join） 直接结束线程（pthread_exit），分离 让线程自己管理自己的资源（pthread_detach） 进程的创建（fork）：内部调用ke..."><link rel="preload" href="/assets/style-D1aCdnbW.css" as="style"><link rel="stylesheet" href="/assets/style-D1aCdnbW.css"><link rel="modulepreload" href="/assets/app-BYecpAAQ.js"><link rel="modulepreload" href="/assets/index.html-DxV0Vc7S.js"><link rel="prefetch" href="/assets/index.html-6qMkuRoT.js" as="script"><link rel="prefetch" href="/assets/index.html-CDCPdFFz.js" as="script"><link rel="prefetch" href="/assets/index.html-Dpket2s2.js" as="script"><link rel="prefetch" href="/assets/index.html-COm88RrP.js" as="script"><link rel="prefetch" href="/assets/index.html-BqktPRoM.js" as="script"><link rel="prefetch" href="/assets/index.html-BsrFVshd.js" as="script"><link rel="prefetch" href="/assets/index.html-CzPQ3bdk.js" as="script"><link rel="prefetch" href="/assets/index.html-Dm8ZChZz.js" as="script"><link rel="prefetch" href="/assets/index.html-BbmUWf1c.js" as="script"><link rel="prefetch" href="/assets/index.html-CpGJaXcR.js" as="script"><link rel="prefetch" href="/assets/index.html-DeOZPY3w.js" as="script"><link rel="prefetch" href="/assets/index.html-BUD9MOOe.js" as="script"><link rel="prefetch" href="/assets/index.html-DHEjVMAp.js" as="script"><link rel="prefetch" href="/assets/index.html-CP1gosyn.js" as="script"><link rel="prefetch" href="/assets/index.html-BOXvb7VL.js" as="script"><link rel="prefetch" href="/assets/index.html-DwvyGZZ2.js" as="script"><link rel="prefetch" href="/assets/index.html-CszqSY4i.js" as="script"><link rel="prefetch" href="/assets/index.html-CqWM-Bd6.js" as="script"><link rel="prefetch" href="/assets/index.html-BM6z1jB_.js" as="script"><link rel="prefetch" href="/assets/index.html-BqlXOCdg.js" as="script"><link rel="prefetch" href="/assets/index.html-BK8qxHEu.js" as="script"><link rel="prefetch" href="/assets/index.html-qQcbcCgS.js" as="script"><link rel="prefetch" href="/assets/index.html-DoiR0rO3.js" as="script"><link rel="prefetch" href="/assets/index.html-U2p-z_tF.js" as="script"><link rel="prefetch" href="/assets/index.html-D8YNrk3e.js" as="script"><link rel="prefetch" href="/assets/index.html-CtOhvUST.js" as="script"><link rel="prefetch" href="/assets/index.html-DGXLw0-w.js" as="script"><link rel="prefetch" href="/assets/index.html-BO-9bz30.js" as="script"><link rel="prefetch" href="/assets/index.html-Bc1k8kdR.js" as="script"><link rel="prefetch" href="/assets/index.html-DESqgQ0q.js" as="script"><link rel="prefetch" href="/assets/404.html-DUbxjHKW.js" as="script"><link rel="prefetch" href="/assets/index.html-Cwhlh3Jg.js" as="script"><link rel="prefetch" href="/assets/index.html-DuxPyQ1E.js" as="script"><link rel="prefetch" href="/assets/index.html-bbNqwA0G.js" as="script"><link rel="prefetch" href="/assets/index.html-CNAbN59a.js" as="script"><link rel="prefetch" href="/assets/mermaid.esm.min-DQq_5qGn.js" as="script"><link rel="prefetch" href="/assets/photoswipe.esm-CKV1Bsxh.js" as="script"><link rel="prefetch" href="/assets/giscus-BlIObGha.js" as="script"><link rel="prefetch" href="/assets/searchBox-default-NNqIlNVb.js" as="script"><link rel="prefetch" href="/assets/SearchBox-D8a8lGxn.js" as="script"></head><body><div id="app"><!--[--><!--[--><div class="theme-plume vp-layout" vp-container data-v-d90a7a26><!--[--><!--[--><!--]--><!--[--><span tabindex="-1" data-v-17e3d305></span><a href="#VPContent" class="vp-skip-link visually-hidden" data-v-17e3d305> Skip to content </a><!--]--><!----><header class="vp-nav" data-v-e98a6132><div class="vp-navbar" vp-navbar data-v-e98a6132 data-v-2c31ea5e><div class="wrapper" data-v-2c31ea5e><div class="container" data-v-2c31ea5e><div class="title" data-v-2c31ea5e><div class="vp-navbar-title" data-v-2c31ea5e data-v-1a4f50af><a class="vp-link link no-icon title" href="/" data-v-1a4f50af><!--[--><!--[--><!--]--><!--[--><!--[--><!--[--><img class="vp-image dark logo" style="" src="https://theme-plume.vuejs.press/plume.png" alt data-v-480e858a><!--]--><!--[--><img class="vp-image light logo" style="" src="https://theme-plume.vuejs.press/plume.png" alt data-v-480e858a><!--]--><!--]--><!--]--><span data-v-1a4f50af>Dessera Lab</span><!--[--><!--]--><!--]--><!----></a></div></div><div class="content" data-v-2c31ea5e><div class="content-body" data-v-2c31ea5e><!--[--><!--]--><div class="vp-navbar-search search" data-v-2c31ea5e><div class="search-wrapper" data-v-97535d1e><!----><div id="local-search" data-v-97535d1e><button type="button" class="mini-search mini-search-button" aria-label="搜索文档" data-v-97535d1e><span class="mini-search-button-container"><span class="mini-search-search-icon vpi-mini-search" aria-label="search icon"></span><span class="mini-search-button-placeholder">搜索文档</span></span><span class="mini-search-button-keys"><kbd class="mini-search-button-key"></kbd><kbd class="mini-search-button-key">K</kbd></span></button></div></div></div><!--[--><!--]--><nav aria-labelledby="main-nav-aria-label" class="vp-navbar-menu menu" data-v-2c31ea5e data-v-d43c1732><span id="main-nav-aria-label" class="visually-hidden" data-v-d43c1732>Main Navigation</span><!--[--><!--[--><a class="vp-link link navbar-menu-link" href="/" tabindex="0" data-v-d43c1732 data-v-d4acf911><!--[--><!----><span data-v-d4acf911>首页</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/blog/" tabindex="0" data-v-d43c1732 data-v-d4acf911><!--[--><!----><span data-v-d4acf911>博客</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/blog/tags/" tabindex="0" data-v-d43c1732 data-v-d4acf911><!--[--><!----><span data-v-d4acf911>标签</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/blog/archives/" tabindex="0" data-v-d43c1732 data-v-d4acf911><!--[--><!----><span data-v-d4acf911>归档</span><!----><!--]--><!----></a><!--]--><!--[--><a class="vp-link link navbar-menu-link" href="/friends/" tabindex="0" data-v-d43c1732 data-v-d4acf911><!--[--><!----><span data-v-d4acf911>友情链接</span><!----><!--]--><!----></a><!--]--><!--[--><div class="vp-flyout vp-navbar-menu-group" data-v-d43c1732 data-v-86530b6c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" data-v-86530b6c><span class="text" data-v-86530b6c><!----><!----><span data-v-86530b6c>笔记</span><!----><span class="vpi-chevron-down text-icon" data-v-86530b6c></span></span></button><div class="menu" data-v-86530b6c><div class="vp-menu" data-v-86530b6c data-v-709dc2b1><div class="items" data-v-709dc2b1><!--[--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-1ff1855f><a class="vp-link link" href="/nix/" data-v-1ff1855f><!--[--><!----> [WIP]nix教程 <!----><!--]--><!----></a></div><!--]--><!--[--><div class="vp-menu-link" data-v-709dc2b1 data-v-1ff1855f><a class="vp-link link" href="/oslab/" data-v-1ff1855f><!--[--><!----> [WIP]动手搭建自己的操作系统 <!----><!--]--><!----></a></div><!--]--><!--]--></div><!--[--><!--]--></div></div></div><!--]--><!--]--></nav><!--[--><!--]--><!----><div class="vp-navbar-appearance appearance" data-v-2c31ea5e data-v-a295abf6><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-a295abf6 data-v-596c25a9 data-v-7eb32327><span class="check" data-v-7eb32327><span class="icon" data-v-7eb32327><!--[--><span class="vpi-sun sun" data-v-596c25a9></span><span class="vpi-moon moon" data-v-596c25a9></span><!--]--></span></span></button></div><div class="vp-social-links vp-navbar-social-links social-links" data-v-2c31ea5e data-v-ad52545c data-v-40bac536><!--[--><a class="vp-social-link no-icon" href="https://github.com/Dessera" aria-label="github" target="_blank" rel="noopener" data-v-40bac536 data-v-67b21932><span class="vpi-social-github" /></a><!--]--></div><div class="vp-flyout vp-navbar-extra extra" data-v-2c31ea5e data-v-652282fd data-v-86530b6c><button type="button" class="button" aria-haspopup="true" aria-expanded="false" aria-label="extra navigation" data-v-86530b6c><span class="vpi-more-horizontal icon" data-v-86530b6c></span></button><div class="menu" data-v-86530b6c><div class="vp-menu" data-v-86530b6c data-v-709dc2b1><!----><!--[--><!--[--><!----><div class="group" data-v-652282fd><div class="item appearance" data-v-652282fd><p class="label" data-v-652282fd>外观</p><div class="appearance-action" data-v-652282fd><button class="vp-switch vp-switch-appearance" type="button" role="switch" title aria-checked="false" data-v-652282fd data-v-596c25a9 data-v-7eb32327><span class="check" data-v-7eb32327><span class="icon" data-v-7eb32327><!--[--><span class="vpi-sun sun" data-v-596c25a9></span><span class="vpi-moon moon" data-v-596c25a9></span><!--]--></span></span></button></div></div></div><div class="group" data-v-652282fd><div class="item social-links" data-v-652282fd><div class="vp-social-links social-links-list" data-v-652282fd data-v-40bac536><!--[--><a class="vp-social-link no-icon" href="https://github.com/Dessera" aria-label="github" target="_blank" rel="noopener" data-v-40bac536 data-v-67b21932><span class="vpi-social-github" /></a><!--]--></div></div></div><!--]--><!--]--></div></div></div><!--[--><!--]--><button type="button" class="vp-navbar-hamburger hamburger" aria-label="mobile navigation" aria-expanded="false" aria-controls="nav-screen" data-v-2c31ea5e data-v-2b50024d><span class="container" data-v-2b50024d><span class="top" data-v-2b50024d></span><span class="middle" data-v-2b50024d></span><span class="bottom" data-v-2b50024d></span></span></button></div></div></div></div><div class="divider" data-v-2c31ea5e><div class="divider-line" data-v-2c31ea5e></div></div></div><!----></header><div class="vp-local-nav fixed reached-top is-blog" data-v-3944d8e8><button class="hidden menu" disabled aria-expanded="false" aria-controls="SidebarNav" data-v-3944d8e8><span class="vpi-align-left menu-icon" data-v-3944d8e8></span><span class="menu-text" data-v-3944d8e8>Menu</span></button><div class="vp-local-nav-outline-dropdown" style="--vp-vh:0px;" data-v-3944d8e8 data-v-4114a62c><button data-v-4114a62c>返回顶部</button><!----></div></div><!----><!--[--><div id="VPContent" vp-content class="vp-content" data-v-b2beaca7><div class="vp-doc-container is-blog" data-v-b2beaca7 data-v-23f6ad98><!--[--><!--]--><div class="container" data-v-23f6ad98><!----><div class="content" data-v-23f6ad98><div class="content-container" data-v-23f6ad98><!--[--><!--]--><main class="main" data-v-23f6ad98><nav class="vp-breadcrumb" data-v-23f6ad98 data-v-1ae4ad7a><ol vocab="https://schema.org/" typeof="BreadcrumbList" data-v-1ae4ad7a><!--[--><li property="itemListElement" typeof="ListItem" data-v-1ae4ad7a><a class="vp-link link breadcrumb" href="/" property="item" typeof="WebPage" data-v-1ae4ad7a><!--[-->首页<!--]--><!----></a><span class="vpi-chevron-right" data-v-1ae4ad7a></span><meta property="name" content="首页" data-v-1ae4ad7a><meta property="position" content="1" data-v-1ae4ad7a></li><li property="itemListElement" typeof="ListItem" data-v-1ae4ad7a><a class="vp-link link breadcrumb" href="/blog/" property="item" typeof="WebPage" data-v-1ae4ad7a><!--[-->博客<!--]--><!----></a><span class="vpi-chevron-right" data-v-1ae4ad7a></span><meta property="name" content="博客" data-v-1ae4ad7a><meta property="position" content="2" data-v-1ae4ad7a></li><li property="itemListElement" typeof="ListItem" data-v-1ae4ad7a><a class="vp-link link breadcrumb" href="/blog/categories/?id=7051dc" property="item" typeof="WebPage" data-v-1ae4ad7a><!--[-->笔记<!--]--><!----></a><span class="vpi-chevron-right" data-v-1ae4ad7a></span><meta property="name" content="笔记" data-v-1ae4ad7a><meta property="position" content="3" data-v-1ae4ad7a></li><li property="itemListElement" typeof="ListItem" data-v-1ae4ad7a><a class="vp-link link breadcrumb current" href="/article/t7r0wnef/" property="item" typeof="WebPage" data-v-1ae4ad7a><!--[-->秋招面经笔记-操作系统&amp;Linux串烧<!--]--><!----></a><!----><meta property="name" content="秋招面经笔记-操作系统&amp;Linux串烧" data-v-1ae4ad7a><meta property="position" content="4" data-v-1ae4ad7a></li><!--]--></ol></nav><!--[--><!--]--><!--[--><h1 class="vp-doc-title page-title" data-v-ba8d1a1e><!----> 秋招面经笔记-操作系统&amp;Linux串烧 <!----></h1><div class="vp-doc-meta" data-v-ba8d1a1e><!--[--><!--]--><p class="reading-time" data-v-ba8d1a1e><span class="vpi-books icon" data-v-ba8d1a1e></span><span data-v-ba8d1a1e>约 3069 字</span><span data-v-ba8d1a1e>大约 10 分钟</span></p><p data-v-ba8d1a1e><span class="vpi-tag icon" data-v-ba8d1a1e></span><!--[--><a class="vp-link link tag vp-tag-kyod" href="/blog/tags/?tag=OS" data-v-ba8d1a1e><!--[-->OS<!--]--><!----></a><a class="vp-link link tag vp-tag-0hmg" href="/blog/tags/?tag=Linux" data-v-ba8d1a1e><!--[-->Linux<!--]--><!----></a><!--]--></p><!--[--><!--]--><p class="create-time" data-v-ba8d1a1e><span class="vpi-clock icon" data-v-ba8d1a1e></span><span data-v-ba8d1a1e>2025-08-09</span></p></div><!--]--><!--[--><!--]--><div class="_article_t7r0wnef_ external-link-icon-enabled vp-doc plume-content" vp-content data-v-23f6ad98><!--[--><!--]--><div data-v-23f6ad98><h2 id="进程、线程与协程" tabindex="-1"><a class="header-anchor" href="#进程、线程与协程"><span>进程、线程与协程</span></a></h2><table><thead><tr><th></th><th>进程</th><th>线程</th><th>协程</th></tr></thead><tbody><tr><td>描述</td><td>资源分配的最小单位</td><td>操作系统调度的最小单位</td><td>用户态的轻量线程</td></tr><tr><td>切换对象</td><td>寄存器、内核栈、页表、文件描述符</td><td>寄存器，内核栈</td><td>寄存器，函数栈</td></tr><tr><td>切换者</td><td>操作系统</td><td>操作系统</td><td>用户</td></tr><tr><td>并发</td><td>单个CPU上通过切换实现并发，在不同的CPU上调度实现并行</td><td>单个进程内的线程并发执行</td><td>同时只能有一个协程运行</td></tr><tr><td>通信</td><td>依靠操作系统</td><td>读写进程数据段或堆栈</td><td>读写进程数据段或堆栈</td></tr></tbody></table><ul><li>Linux线程：轻量级的进程，与进程同样以task_struct结构体的形式保存，线程栈的大小默认是8M，最大线程数一般受制于虚拟空间大小</li><li>线程回收： <ul><li>等待线程结束（<code>pthread_join</code>）</li><li>直接结束线程（<code>pthread_exit</code>），分离</li><li>让线程自己管理自己的资源（<code>pthread_detach</code>）</li></ul></li><li>进程的创建（<code>fork</code>）：内部调用<code>kernel_copy</code>，简单来说是复制了当前的的任务结构体作为新的进程</li><li>进程的退出（<code>exit/_exit/exit_group</code>）： <ul><li><code>_exit</code>：立即进入内核，无条件终止进程</li><li><code>exit</code>：在<code>_exit</code>前会刷新所有流（清空缓冲），这也是为什么如果子进程（没有<code>exec</code>）调用了<code>exit</code>，父进程就无法使用文件，Linux中，<code>_exit</code>实际上是<code>exit_group</code>的封装</li></ul></li><li>进程调度的简单过程：用户态 -&gt; 中断 -&gt; 内核态 -&gt; 替换<code>task_struct</code> -&gt; 设置页表、文件描述符等资源 -&gt; 切换栈 -&gt; 中断 -&gt; 用户态</li><li>进程调度算法： <ul><li>先来先服务（FCFS）</li><li>短作业优先（SJF，不能实现）</li><li>最短剩余时间优先（SRTN，不能实现）</li><li>时间片轮转（RR）抢占式</li><li>优先级调度</li><li>多级反馈队列：按照不同的时间片（优先级，比如第一级8ms，第二级16ms，etc.）分组任务，如果任务在当前队列没有执行完成，就被移动到下一级队列，只有上一级队列没有人在排队，下一级才会被调度</li><li>CFS：记录每个进程的运行时间（<code>vruntime</code>），总是选择<code>vruntime</code>最小的进程运行，优先级越高，<code>vruntime</code>增长速度越慢</li><li>O(1)调度：从优先级队列的最高优先级中找到进程调度（FIFO）</li></ul></li><li>进程通信： <ul><li>管道（<code>pipe</code>）：半双工（可能考虑父子进程都使用rw文件，但是一般来说，我觉得是单工） <ul><li>无名管道（内存文件）：父子进程之间使用</li><li>有名管道（FIFO文件，借助文件系统）：允许在没有亲缘关系的进程间使用</li></ul></li><li>共享内存：由一个进程创建，但多个进程都可以访问，最快的方式，要与信号量配合使用（通知内存变化）</li><li>消息队列：由操作系统维护的消息链表</li><li>信号：通知进程某事发生，比如<code>SIGABRT</code>、<code>SIGTERM</code>等</li><li>信号量：计数器，控制多个进程对共享资源的访问</li><li>套接字：利用网络进行进程间通信</li></ul></li><li>进程状态： <ul><li>NEW：新建</li><li>READY：可以被调度</li><li>RUNNING：正在或即将运行</li><li>WAITING：等待加入调度（IO或者等待其他进程）</li><li>EXIT：退出</li></ul></li><li>Linux特殊进程： <ul><li>守护进程：后台运行的，没有和终端相连的进程，创建守护进程要创建子进程，并退出父进程，在子进程中新建会话，再创建孙进程，子进程退出时，这个孙进程就是不属于原终端的进程了（还需要改变文件权限掩码、重置根目录等）。</li><li>孤儿进程：父进程先退出，子进程会由<code>init</code>收养</li><li>僵尸进程：子进程退出，父进程没有等待，子进程一直等待父进程<code>wait</code>，无法真正退出</li></ul></li><li>C/C++程序的编译到运行 <ul><li>预处理</li><li>编译（to asm）</li><li>汇编（to obj）</li><li>链接（to elf64） <ul><li>静态链接就是把预编译好的目标文件一同链接</li><li>动态链接已经生成的二进制文件，链接时会检查符号，并设置GOT和PLT的结构</li></ul></li><li>运行时，装载器（<code>ld-linux.so</code>）解析二进制文件（elf64）加载到内存空间，动态库以文件映射的方式加载进入内存空间，动态修改GOT表，将变量符号安排到正确的内存地址，当外部函数调用到来时，PLT表跳转到GOT表对应位置，调用装载器初始化正确的函数地址，然后跳转到该函数（可以加快载入时间，延迟初始化）</li></ul></li><li>同步原语 <ul><li>测试并设置（<code>test_and_set</code>）：获取旧数值并设置新数值</li><li>比较并交换（<code>compare_and_swap</code>）：比较数值是否符合预期，是则更新值，返回旧数值</li><li>总线锁：多CPU下，总线锁阻止其它CPU访问数据</li><li>缓存锁：通过缓存一致性协议保证CPU缓存中的数值都是相同的</li></ul></li><li>同步机制： <ul><li>临界区（开关中断）</li><li>信号量</li><li>互斥（同时只能有一个访问）与同步（按照一定的制约顺序执行）</li><li>管程（利用条件变量）</li></ul></li><li>典型的锁： <ul><li>读写锁：多个读者可以同时读，同时只能有一个写者（有写者时不能有读者），写者优先级高于读者</li><li>互斥锁：同时只能有一人访问资源</li><li>条件变量：根据某个条件判断是否解除互斥，是互斥锁的补全（同步）</li><li>自旋锁：如果无法取得，则原地自旋（<code>while</code>），直到能够进入，利用进程切换，会导致时间片浪费，适用于上锁时间短的情况</li><li>RCU（内核同步）：在读者完成了对资源的读取后，写者就可以安全地修改资源，因此要确定这个所有读者均完成读取的“宽限期”。RCU使用前禁止抢占，在临界区内禁止调度，因为禁止调度，如果发生了调度，说明在某个CPU上，对该对象的读取已经完成，所有CPU均调度完成时，旧对象则没有任何引用了，此时可以安全覆盖旧对象。</li></ul></li><li>POSIX同步机制： <ul><li>POSIX信号量：进程/线程同步</li><li>POSIX互斥锁，条件变量：线程同步</li></ul></li><li>线程终端退出：<code>tty</code>退出时会发送<code>SIGHUP</code>给命令行，命令行会捕捉该命令并转发给子进程，如果不做处理，进程会退出</li></ul><h2 id="内存管理" tabindex="-1"><a class="header-anchor" href="#内存管理"><span>内存管理</span></a></h2><ul><li><p>内存：一块高速的易失性存储，程序和数据需要加载到内存中才能被CPU读取和执行，（我认为其目的是充当硬盘和CPU之间的一层缓冲，加速程序（程序执行流和数据访问）的执行。假设没有内存，CPU在执行每条指令，获取任何数据前都需要先访问硬盘获取指令或者数据，其中的时间消耗是无法忍受的）</p></li><li><p>虚拟内存（页表实现）：多级页表为每个进程引入了超大的虚拟空间，让每个进程都能够使用完整的地址范围（间接提升了进程的可移植性，因为不需要固定编址）。同时，页表是分页对内存进行管理、其中的虚拟内存物理上不必相连，甚至不一定在物理内存中，可以通过缺页机制，仅当我们需要该页面时才将内存加载进入物理内存，达到使用有限的内存运行大内存程序</p></li><li><p>快表加持的地址转换：CPU给出逻辑地址，<code>MMU</code>先查<code>TLB</code>是否有对应页号，如果有则直接组合物理地址，否则爬多级页表进行转换，并记录在快表中</p></li><li><p>内存覆盖：把用户空间分为固定区和覆盖区，将活跃的部分放入固定区，其他部分按照调用关系分段，将即将要访问的放在覆盖区，其他放在外存，在需要调用前，将其换入覆盖区，替换原有段</p></li><li><p>内存交换（换入换出）：</p><ul><li>换出：将处于等待（暂时不会运行的进程）换出到辅存，把内存空间腾出来</li><li>换入：把准备好竞争的进程从辅存移入内存</li></ul></li><li><p>换页算法：</p><ul><li>最佳置换法（OPT）：每次淘汰的页面是最长时间内不再访问的页面（不可能实现）</li><li>先进先出（FIFO）：最早进入的页面最早淘汰</li><li>最近最久未使用（LRU）：记录页面的自上次被访问以来所经历的时间，淘汰时，选择页面中时间最大的</li><li>时钟置换算法（CLOCK）：将页面链接为链表，置访问位,当要淘汰页面时遍历该表，如果未访问则换出，若访问过则清空访问位，继续检查下一个，如果没找到则进行第二轮扫描</li><li>改进时钟置换：添加访问位和修改位：第一轮遇到(0,0)换出；第二轮找(0,1)，访问置0；第三轮找(0,0)；第四轮找(0,1)</li></ul></li><li><p>内部碎片和外部碎片：</p><ul><li>内部碎片：分配器只能分配固定大小的内存，由于需求内存的大小不一致而产生的空间浪费</li><li>外部碎片：内存的申请和释放导致内存中出现小空闲区，无法被利用</li></ul></li><li><p>内存空间（从高到低）：</p><table><thead><tr><th>区域</th><th>内容</th></tr></thead><tbody><tr><td>内核</td><td>控制程序执行的操作系统功能</td></tr><tr><td>栈</td><td>环境变量、argv、argc、main函数的局部变量，其他函数的局部变量（向下增长）</td></tr><tr><td>闲置</td><td>栈的增长空间</td></tr><tr><td>共享内存</td><td>动态链接库、用户映射等</td></tr><tr><td>闲置</td><td>堆的增长空间</td></tr><tr><td>堆</td><td>需要申请的大内存空间（向上增长）</td></tr><tr><td>数据段</td><td>初始化数据，未初始化数据</td></tr><tr><td>代码段</td><td>静态链接库函数、其他程序函数、main函数、启动例程（crt0.o）</td></tr></tbody></table></li><li><p>glibc内存池（<code>ptmalloc</code>）：</p><ul><li><code>ptmalloc</code>以<code>chunk</code>组织内存</li><li>每个进程都有一个<code>main_arena</code>和若干个<code>non_main_arena</code>，采用环形链表管理，<code>main_arena</code>能够使用<code>brk</code>和<code>mmap</code>，<code>non_main_arena</code>只能使用<code>mmap</code>（那次申请64MB，切块交给用户），申请内存时，如果线程当前拥有一个<code>arena</code>，会从中进行分配，如果失败（被占用）则在链表中循环，如果没有空闲<code>arena</code>，则创建新的</li><li>使用<code>mmap</code>申请的内存用完后直接还给操作系统</li><li>主分配区上，判断申请大小是否超过<code>DEFAULT_MMAP_THRESHOLD</code>决定是否使用mmap,一般是128KB，小于这个值则使用<code>sbrk</code></li><li>返还的内存被记录在名为<code>bins</code>的结构中： <ul><li><code>bins</code>：长128的数组，每个元素都是一个双向链表</li><li><code>unsorted_bin</code>（<code>bins[1]</code>）：维护<code>free</code>释放的<code>chunk</code></li><li><code>small_bins</code>（<code>bins[2,63]</code>）：维护小于512字节的内存块，<code>chunk</code>大小为<code>index * 8</code></li><li><code>large_bins</code>（<code>bins[64,127]</code>）：维护大于512字节的内存块，<code>index</code>越大，<code>chunk</code>大小相差越大</li><li><code>fast_bins</code>：不大于<code>max_fast(128B)</code>的<code>chunk</code>释放后，会被放到<code>fast_bins</code>中，当需要小内存时，他们会被优先分配，某个特定时候，<code>fast_bins</code>会尝试合并，并放入<code>unsorted_bin</code>中</li><li>申请内存会先查找<code>fast_bins</code>，再尝试从<code>unsorted_bin</code>中查找，如果<code>chunk</code>不能满足需求，则将其放入合适的<code>bin</code>中，否则切块交给用户</li></ul></li><li>当<code>bins</code>无法满足需求时，会在<code>top_chunk</code>中分配内存（堆最上面的空间），剩余的部分形成新的<code>top_chunk</code></li><li><code>mmaped_chunk</code>是由<code>mmap</code>分配的<code>chunk</code>,它们用完后直接还给操作系统</li></ul></li></ul><h2 id="中断" tabindex="-1"><a class="header-anchor" href="#中断"><span>中断</span></a></h2><ul><li>硬件中断：外部硬件与CPU和内核交互 <ul><li>上半中断：中断服务函数</li><li>下半中断： <ul><li>软中断：编译期分配好，不可更改，最多有32个软中断，目前只有网络和SCSI直接使用软中断</li><li><code>tasklet</code>：使用两类软中断<code>HI_SOFTIRQ</code>和<code>TASKLET_SOFTIRQ</code>，可以动态增减，同类<code>tasklet</code>不能并发执行</li><li>工作队列：利用内核线程执行，可以睡眠和阻塞</li></ul></li></ul></li><li>软件中断：异常、系统调用</li></ul><h2 id="参考文章" tabindex="-1"><a class="header-anchor" href="#参考文章"><span>参考文章</span></a></h2><p><a href="https://interviewguide.cn/notes/03-hunting_job/02-interview/02-01-os.html" target="_blank" rel="noopener noreferrer">阿秀的学习笔记-操作系统</a></p></div><!----><!--[--><h2 id="doc-changelog" tabindex="-1"><a href="#doc-changelog" class="header-anchor"><span>更新日志</span></a></h2><div class="vp-changelog-wrapper"><div class="vp-changelog-header"><div class="vp-latest-updated"><span class="vp-changelog-icon"></span><span data-allow-mismatch>2025/10/8 11:03</span></div><div><span class="vp-changelog-menu-icon"></span><span>查看所有更新日志</span></div></div><ul class="vp-changelog-list"><!--[--><li class="vp-changelog-item-commit"><span class="vp-changelog-hash" target="_blank" rel="noreferrer"><code>8822e</code></span><span class="vp-changelog-divider">-</span><span class="vp-changelog-message">MNN01</span><span class="vp-changelog-date" data-allow-mismatch>于 <time datetime="2025-10-08T11:03:23.000Z">2025/10/8</time></span></li><li class="vp-changelog-item-commit"><span class="vp-changelog-hash" target="_blank" rel="noreferrer"><code>f408e</code></span><span class="vp-changelog-divider">-</span><span class="vp-changelog-message">修复命名</span><span class="vp-changelog-date" data-allow-mismatch>于 <time datetime="2025-08-10T06:06:13.000Z">2025/8/10</time></span></li><li class="vp-changelog-item-commit"><span class="vp-changelog-hash" target="_blank" rel="noreferrer"><code>00307</code></span><span class="vp-changelog-divider">-</span><span class="vp-changelog-message">参考文章</span><span class="vp-changelog-date" data-allow-mismatch>于 <time datetime="2025-08-10T06:05:51.000Z">2025/8/10</time></span></li><li class="vp-changelog-item-commit"><span class="vp-changelog-hash" target="_blank" rel="noreferrer"><code>e854c</code></span><span class="vp-changelog-divider">-</span><span class="vp-changelog-message">秋招笔记</span><span class="vp-changelog-date" data-allow-mismatch>于 <time datetime="2025-08-10T06:05:19.000Z">2025/8/10</time></span></li><!--]--></ul></div><!--]--><div class="vp-doc-copyright" data-v-23f6ad98><h2 id="doc-copyright" tabindex="-1" class="vp-doc-header" data-v-309da98c><a href="#doc-copyright" class="header-anchor" data-v-309da98c><span data-v-309da98c><!--[-->版权所有<!--]--></span></a></h2><div class="hint-container tip copyright-container" data-v-22c67d2a><p data-v-22c67d2a><span data-v-22c67d2a>版权归属：</span><a class="vp-link link no-icon" href="https://github.com/Dessera" target="_blank" rel="noreferrer" data-v-22c67d2a><!--[-->Dessera<!--]--><!----></a></p><!----><p data-v-22c67d2a><span data-v-22c67d2a>许可证：</span><a class="vp-link link no-icon" href="https://creativecommons.org/licenses/by-sa/4.0/" target="_blank" rel="noreferrer" data-v-22c67d2a><!--[-->署名-相同方式共享 4.0 国际 (CC-BY-SA-4.0)<!--]--><!----></a><!--[--><span class="vpi-license-cc" data-v-22c67d2a></span><span class="vpi-license-by" data-v-22c67d2a></span><span class="vpi-license-sa" data-v-22c67d2a></span><!--]--></p></div></div></div></main><footer class="vp-doc-footer" data-v-23f6ad98 data-v-7138e2cb><!--[--><!--]--><!----><div class="contributors" aria-label="Contributors" data-v-7138e2cb><span class="contributors-label" data-v-7138e2cb>贡献者: </span><span class="contributors-info" data-v-7138e2cb><!--[--><!--[--><span class="contributor" data-v-7138e2cb>Dessera</span><!----><!--]--><!--]--></span></div><nav class="prev-next" data-v-7138e2cb><div class="pager" data-v-7138e2cb><a class="vp-link link pager-link prev" href="/article/d7qqxor8/" data-v-7138e2cb><!--[--><span class="desc" data-v-7138e2cb>上一页</span><span class="title" data-v-7138e2cb>项目笔记-OrdOS操作系统01-启动流程</span><!--]--><!----></a></div><div class="pager" data-v-7138e2cb><a class="vp-link link pager-link next" href="/article/nin3762j/" data-v-7138e2cb><!--[--><span class="desc" data-v-7138e2cb>下一页</span><span class="title" data-v-7138e2cb>C++漫谈-面向对象</span><!--]--><!----></a></div></nav></footer><div id="comment" class="giscus-wrapper input-top vp-comment" vp-comment style="display:block;" data-v-23f6ad98><div style="display: flex;align-items: center;justify-content: center;height: 96px"><span style="--loading-icon: url(&quot;data:image/svg+xml;utf8,%3Csvg xmlns=&#39;http://www.w3.org/2000/svg&#39; preserveAspectRatio=&#39;xMidYMid&#39; viewBox=&#39;25 25 50 50&#39;%3E%3CanimateTransform attributeName=&#39;transform&#39; type=&#39;rotate&#39; dur=&#39;2s&#39; keyTimes=&#39;0;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;360&#39;%3E%3C/animateTransform%3E%3Ccircle cx=&#39;50&#39; cy=&#39;50&#39; r=&#39;20&#39; fill=&#39;none&#39; stroke=&#39;currentColor&#39; stroke-width=&#39;4&#39; stroke-linecap=&#39;round&#39;%3E%3Canimate attributeName=&#39;stroke-dasharray&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;1,200;90,200;1,200&#39;%3E%3C/animate%3E%3Canimate attributeName=&#39;stroke-dashoffset&#39; dur=&#39;1.5s&#39; keyTimes=&#39;0;0.5;1&#39; repeatCount=&#39;indefinite&#39; values=&#39;0;-35px;-125px&#39;%3E%3C/animate%3E%3C/circle%3E%3C/svg%3E&quot;);--icon-size: 48px;display: inline-block;width: var(--icon-size);height: var(--icon-size);background-color: currentcolor;-webkit-mask-image: var(--loading-icon);mask-image: var(--loading-icon)"></span></div></div><!--[--><!--]--></div></div></div><!--[--><!--]--></div></div><!--]--><button style="display:none;" type="button" class="vp-back-to-top" aria-label="back to top" data-v-bcf8d9a6><span class="percent" data-allow-mismatch data-v-bcf8d9a6>0%</span><span class="show icon vpi-back-to-top" data-v-bcf8d9a6></span><svg aria-hidden="true" data-v-bcf8d9a6><circle cx="50%" cy="50%" data-allow-mismatch style="stroke-dasharray:calc(0% - 12.566370614359172px) calc(314.1592653589793% - 12.566370614359172px);" data-v-bcf8d9a6></circle></svg></button><footer class="vp-footer" vp-footer data-v-400675cf><!--[--><div class="container" data-v-400675cf><p class="message" data-v-400675cf>Powered by <a target="_blank" href="https://v2.vuepress.vuejs.org/">VuePress</a> & <a target="_blank" href="https://theme-plume.vuejs.press">vuepress-theme-plume</a></p><!----></div><!--]--></footer><!--[--><!--]--><!--]--></div><!----><!--]--><!--[--><!--]--><!--]--></div><script type="module" src="/assets/app-BYecpAAQ.js" defer></script></body></html>